# 浏览器工作原理

浏览器是多线程的，js是单线程的。（js在浏览器中可以是多线程的）

浏览器在内核控制下相互配合以保持同步，至少有三个常驻的线程 ==JavaScript引擎线程==，==GUI渲染线程==，==浏览器事件触发线程==。

1. Javascript引擎是基于事件驱动单线程执行的
2. 渲染线程负责渲染浏览器界面，但是GUI渲染线程与JS引擎是==互斥==的，当JS引擎执行时GUI线程会被挂起，GUI的更新也会被保存在一个队列中，等到JS引擎空闲时才有机会被执行。这就是==JS阻塞页面加载==。
3. 事件触发线程，当一个事件被触发时，该线程会把事件添加到任务的队尾（队列，后进后出），等待JS引擎的处理。



浏览器内核：

1. Trident IE
2. Webkit  Chrome, Safari
3. Gecko   FireFox

引擎一开始会从网络获取请求文档的内容，然后进行如下所示的基本流程：

请求HTML到控制器，构建DOM树=>渲染树控制器=>布局渲染树=>在页面中绘制树

